# Exercise 11.2


1.helm 을 이용하여 ingress 검색
```
helm search hub ingress
```

##

2.nginx ingress 챠트 레포지토리 추가
```
helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
```

##

3.repo 업데이트
```
helm repo update
```

##

4.yaml을 다운로드 하고, Daemonset으로 변경
```
helm fetch ingress-nginx/ingress-nginx --untar
```
```
cd ingress-nginx
vi values.yaml
```
약 190 라인
```
# -- Use a `DaemonSet` or `Deployment`
kind: DaemonSet   # <-----이 부분 수정 (대소문자 유의)
# -- Annotations to be added to the controller Deployment or DaemonSet
```

##

5.helm 챠트를 사용하여 컨트롤러 설치
```
helm install myingress .
```

##

6.설치 확인
```
kubectl get ingress --all-namespaces
kubectl get pod --all-namespaces | grep nginx
```

Pod 가 Running 상태가 되면 다음 단계로 진행

##

7.ingress 규칙 생성
```
cat <<EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ingress-test
  annotations:
    kubernetes.io/ingress.class: "nginx"
spec:
  rules:
  - host: www.external.com
    http:
      paths:
      - backend:
          service:
            name: web-one
            port:
              number: 80
        path: /
        pathType: ImplementationSpecific
status:
  loadBalancer: {}
EOF
```

##

8.
